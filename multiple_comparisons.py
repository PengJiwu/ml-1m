# split Movielens1m into N = 10, 20, 50, 100, ALL



c100 = [
[0, 0.026573, 20493766.354429, 0.347550, 0.821455],
[1, 21.240566, 11943636.097843, 0.223105, 0.894959],
[2, 43.370973, 11872038.989402, 0.232038, 0.890045],
[3, 67.226583, 11844740.201489, 0.232561, 0.889787],
[4, 91.574483, 11839794.391866, 0.230802, 0.890671],
[5, 119.784221, 11839396.612699, 0.230434, 0.890852],
[6, 144.977448, 11839361.110977, 0.230401, 0.890891]
]

c200 = [
[0, 0.035494, 40826353.117932, 0.345754, 0.826788],
[1, 60.309774, 28323496.740011, 0.215710, 0.896729],
[2, 122.656092, 28188142.654277, 0.215559, 0.896964],
[3, 183.390610, 27948317.668610, 0.209047, 0.901554],
[4, 247.419412, 27684736.041036, 0.203113, 0.904810],
[5, 308.719500, 27521864.755220, 0.198385, 0.907726],
[6, 370.647689, 27449817.679593, 0.196115, 0.909600],
[7, 429.326140, 27413645.838018, 0.195081, 0.910184],
[8, 488.620936, 27392920.616412, 0.194643, 0.910704],
[9, 545.980129, 27380481.056378, 0.194437, 0.911137],
[10, 606.212148, 27373129.215408, 0.194415, 0.911045],
[11, 666.625563, 27368633.412996, 0.194294, 0.911080]
]

cALL = [
[0, 0.027514, 138708145.906208, 0.339713, 0.827200],
[1, 277.584344, 87315833.848825, 0.210530, 0.898999],
[2, 568.460727, 81292677.328884, 0.199047, 0.907602],
[3, 882.662012, 72425778.869140, 0.202351, 0.906175],
[4, 1245.207071, 62144180.668596, 0.193385, 0.910424]
]

# 1 core



w100 = [
[0, 0.0, 3.734650223682237e7, 0.3439072847682103, 0.8245657592449451],
[1, 4.654531746, 1.2408633140403587e7, 0.28536423841059505, 0.8675941516746746],
[2, 9.162732944, 1.2102989838173248e7, 0.2333112582781459, 0.8907663741739291],
[3, 14.417036667, 1.191705365677037e7, 0.2357468727005149, 0.8886259270528043],
[4, 19.689413762, 1.1846436418400146e7, 0.2317071376011774, 0.8903705804923184],
[5, 25.60725453, 1.184002390268666e7, 0.23023546725533509, 0.890924638031281],
[6, 31.60608589, 1.1839523268606711e7, 0.22984547461368657, 0.891232192486661],
[7, 37.494323, 1.1839457487330996e7, 0.22977924944812378, 0.891276834793897],
[8, 43.210875902, 1.183943757280106e7, 0.22978660779985305, 0.8912972503142647],
[9, 48.406863011, 1.183942709861049e7, 0.22984179543782232, 0.891251795694114],
[10, 53.020790988, 1.1839419914672384e7, 0.22989698307579148, 0.891205032734546],
[11, 57.379368331, 1.183941425736879e7, 0.22993745401030213, 0.8911554844631295]
]

w200 = [
[0, 0.0, 5.8049616055231035e7, 0.3439072847682103, 0.8245657592449451],
[1, 9.757336744, 3.213352531497197e7, 0.25478660779985257, 0.8820313019224842],
[2, 22.40471945, 2.7826690976597395e7, 0.20522442972774235, 0.9044514335780212],
[3, 37.529653654, 2.7475783963489532e7, 0.1972663723325992, 0.9089250682846542],
[4, 52.216685983000005, 2.740663684749367e7, 0.19531272994849364, 0.9101369495572795],
[5, 67.006075983, 2.7382775369273018e7, 0.19443708609271718, 0.9107035921052952],
[6, 82.119501903, 2.7371949167126328e7, 0.1942126563649764, 0.9108643206083561],
[7, 97.215373525, 2.7366271489146393e7, 0.1940691685062568, 0.910926455289566],
[8, 111.153091281, 2.736298147777179e7, 0.19401030169242306, 0.9108875981056551]
] 

wALL = [
[0, 0.0, 1.5787294622003922e8, 0.3439072847682103, 0.8245657592449451],
[1, 16.838782364, 7.884246681077342e7, 0.21435246504782995, 0.8994066741437412],
[2, 38.772525341000005, 6.53191813175356e7, 0.19364974245769162, 0.9108583532659081],
[3, 60.673207007, 6.300950680772695e7, 0.19218910963944255, 0.9115223240518884],
[4, 83.067443064, 6.214459702054203e7, 0.19168874172185638, 0.9120519797784649],
[5, 105.110683809, 6.171943619489321e7, 0.19194260485651438, 0.9119003852860007],
[6, 126.920255505, 6.1473324943159536e7, 0.191839587932305, 0.9118454939158542],
[7, 148.762825883, 6.131631733600023e7, 0.19175864606328355, 0.9121058940098972],
[8, 170.84200051300002, 6.1209042315050095e7, 0.19194260485651402, 0.9119736964341848],
[9, 192.42396462000002, 6.1131670408168614e7, 0.19198675496688936, 0.9118639407079202],
[10, 214.220929836, 6.107335802305245e7, 0.19181751287711704, 0.9118319020374701],
[11, 236.16476743700002, 6.102781495209712e7, 0.1919941133186177, 0.91177859167287],
[12, 257.985821514, 6.099127376729465e7, 0.19183222958057503, 0.911746843525433],
[13, 279.832830081, 6.096134034804364e7, 0.19186166298749197, 0.9116078098221316],
[14, 301.803465121, 6.0936437535933316e7, 0.19174760853568948, 0.9116751841847669],
[15, 323.71840784899996, 6.091546304951068e7, 0.19172553348050198, 0.9115737781538961],
[16, 345.473301641, 6.089760784523864e7, 0.19179543782192943, 0.9116615178786341],
[17, 367.401599202, 6.088227555795707e7, 0.19186534216335674, 0.9115485400982012],
[18, 388.885892918, 6.086897686554469e7, 0.19189109639440916, 0.9115585579429742],
[19, 410.55149805400004, 6.085734292784582e7, 0.19191685062546143, 0.911523775681522],
[20, 432.270498281, 6.0847075482866235e7, 0.1918064753495232, 0.911598909976668]
]

import numpy as np
import matplotlib.pyplot as plt

c100 = np.array(c100)
c200 = np.array(c200)
cALL = np.array(cALL)
w100 = np.array(w100)
w200 = np.array(w200)
wALL = np.array(wALL)

fig, ax = plt.subplots()
ax.plot(w100[:,1], w100[:,3], 'y', label='primal++, 100 ratings/user, ')
ax.plot(w200[:,1], w200[:,3], 'm', label='primal++, 200 ratings/user, ')
ax.plot(wALL[:,1], wALL[:,3], 'r', label='primal++, ALL ratings/user, ')
ax.plot(c100[:,1], c100[:,3], 'g', label='Collrank, 100 ratings/user, ')
ax.plot(c200[:,1], c200[:,3], 'k', label='Collrank, 200 ratings/user, ')
ax.plot(cALL[:,1], cALL[:,3], 'b', label='Collrank, ALL ratings/user, ')
ax.set_title('Movielens1m, rank 100, lambda = 5000')
ax.set_xlabel('Time')
ax.set_ylabel('Pairwise_Error')
ax.axis([0, 600, 0.15, 0.4])
legend = ax.legend(loc='upper right', shadow=True)
frame = legend.get_frame()
frame.set_facecolor('0.90')
plt.show()


fig, ax = plt.subplots()
#ax.plot(w20[:,1], w20[:,3], 'r--', label='primal++ 1 core, 20 ratings/user, ')
ax.plot(w50[:,1], w50[:,4], 'y', label='primal++ 1 core, 50 ratings/user, ')
ax.plot(w100[:,1], w100[:,4], 'm', label='primal++ 1 core, 100 ratings/user, ')
ax.plot(wALL[:,1], wALL[:,4], 'r', label='primal++ 1 core, ALL ratings/user, ')
#ax.plot(c20[:,1], c20[:,3], 'b--', label='Collrank 8 threads, 20 ratings/user, ')
ax.plot(c50[:,1], c50[:,4], 'g', label='Collrank 8 threads, 50 ratings/user, ')
ax.plot(c100[:,1], c100[:,4], 'k', label='Collrank 8 threads, 100 ratings/user, ')
ax.plot(cALL[:,1], cALL[:,4], 'b', label='Collrank 8 threads, ALL ratings/user, ')
ax.set_title('Movielens1m, rank 100, lambda = 5000')
ax.set_xlabel('Time')
ax.set_ylabel('NDCG')
ax.axis([0, 500, 0.8, 0.95])
legend = ax.legend(loc='lower right', shadow=True)
frame = legend.get_frame()
frame.set_facecolor('0.90')
plt.show()